# Options (Настройки)

## Обзор

Компонент настроек отвечает за управление конфигурацией проекта, настройками экспорта и пользовательскими предпочтениями. Он позволяет пользователю настраивать параметры проекта, формат экспорта и персонализировать интерфейс приложения.

## Состояние

Настройки управляются через машину состояний `projectMachine`, которая контролирует:

- Настройки проекта
- Параметры экспорта
- Пользовательские предпочтения
- Сохранение и загрузку настроек

## Основные функции

- Настройки проекта
- Управление экспортом
- Конфигурация системы
- Пользовательские настройки

## Структура компонентов

### Основные компоненты

- `options/` - компоненты настроек
  - `options.tsx` - корневой компонент
  - `project-settings.tsx` - настройки проекта
  - `export-settings.tsx` - настройки экспорта
  - `user-settings.tsx` - пользовательские настройки
  - `settings-group.tsx` - группа настроек
  - `settings-item.tsx` - элемент настроек

### Файлы состояния

- `machines/project-machine.ts` - машина состояний
- `providers/project-provider.tsx` - провайдер контекста

## Описание машины состояний

`projectMachine` управляет настройками проекта и экспорта. Она контролирует параметры проекта, настройки экспорта, пользовательские предпочтения, а также процессы сохранения и загрузки настроек.

### Контекст projectMachine

- `name: string` - название проекта
- `resolution: Resolution` - разрешение проекта
- `frameRate: number` - частота кадров
- `exportSettings: ExportSettings` - настройки экспорта
- `userSettings: UserSettings` - пользовательские настройки
- `isDirty: boolean` - флаг изменений
- `lastSaved: Date | null` - дата последнего сохранения

### Методы projectMachine

- `setName` - установка названия проекта
- `setResolution` - установка разрешения
- `setFrameRate` - установка частоты кадров
- `setExportSettings` - установка настроек экспорта
- `setUserSettings` - установка пользовательских настроек
- `saveProject` - сохранение проекта
- `loadProject` - загрузка проекта
- `resetSettings` - сброс настроек

## Настройки проекта

### Основные параметры

- **Название проекта** - имя проекта для сохранения и идентификации
- **Разрешение** - размер кадра видео (например, 1920x1080, 3840x2160)
- **Соотношение сторон** - соотношение ширины и высоты (например, 16:9, 4:3, 1:1)
- **Частота кадров** - количество кадров в секунду (например, 24, 30, 60)
- **Длительность проекта** - общая длительность проекта

### Дополнительные параметры

- **Цветовое пространство** - цветовая модель (например, sRGB, Rec.709)
- **Битрейт** - качество видео в битах в секунду
- **Аудио каналы** - моно, стерео или многоканальный звук
- **Частота дискретизации аудио** - качество звука (например, 44.1 кГц, 48 кГц)

## Настройки экспорта

### Форматы экспорта

- **Видео форматы** - MP4, MOV, AVI, WebM
- **Аудио форматы** - MP3, WAV, AAC, OGG
- **Изображения** - JPEG, PNG, TIFF

### Параметры экспорта

- **Качество** - низкое, среднее, высокое, пользовательское
- **Кодек** - H.264, H.265, VP9, AV1
- **Битрейт** - постоянный или переменный
- **Размер файла** - ограничение размера выходного файла
- **Метаданные** - добавление метаданных в экспортируемый файл

### Пресеты экспорта

- **Веб** - оптимизировано для интернета
- **Мобильные устройства** - оптимизировано для смартфонов и планшетов
- **Высокое качество** - максимальное качество
- **Архивное** - для долгосрочного хранения
- **Пользовательские пресеты** - сохраненные пользователем настройки

## Пользовательские настройки

### Интерфейс

- **Тема** - светлая, темная, системная
- **Язык** - выбор языка интерфейса
- **Размер шрифта** - маленький, средний, большой
- **Цветовая схема** - основной цвет интерфейса

### Производительность

- **Качество предпросмотра** - низкое, среднее, высокое
- **Кэширование** - размер кэша и его расположение
- **Использование GPU** - включение/отключение аппаратного ускорения
- **Многопоточность** - количество используемых потоков процессора

### Горячие клавиши

- **Настройка горячих клавиш** - персонализация сочетаний клавиш
- **Пресеты горячих клавиш** - стандартные, для Final Cut Pro, для Adobe Premiere
- **Импорт/экспорт настроек** - сохранение и загрузка пользовательских настроек

## Взаимодействие с другими компонентами

### Взаимодействие с таймлайном

- Применение настроек проекта к таймлайну
- Обновление параметров при изменении проекта

### Взаимодействие с плеером

- Применение настроек качества предпросмотра
- Обновление параметров воспроизведения

### Взаимодействие с браузером

- Применение пользовательских настроек к интерфейсу браузера
- Сохранение предпочтений пользователя

## Примеры использования

### Изменение разрешения проекта

```typescript
// В компоненте настроек
const { setResolution } = useProject();

const handleResolutionChange = (resolution: Resolution) => {
  setResolution(resolution);
};
```

### Сохранение пользовательских настроек

```typescript
// В компоненте настроек
const { setUserSettings, userSettings } = useProject();

const handleThemeChange = (theme: "light" | "dark" | "system") => {
  setUserSettings({
    ...userSettings,
    theme,
  });
};
```

## Планы по развитию

- Реализация настроек аудио
- Реализация настроек видео
- Добавление настроек цвета
- Добавление настроек скорости воспроизведения
- Расширение пресетов экспорта
- Добавление облачного хранения настроек
- Интеграция с ИИ-моделями для автоматического монтажа
- Настройки для чата с ИИ-ассистентом
- Конфигурация панели выбора моделей ИИ для редактирования схемы видео

## Связанные документы

- [Обзор архитектуры](../architecture/overview.md)
- [Машины состояний](../architecture/state-machines.md)
- [Руководство пользователя по настройкам](../user-guide/export.md)
