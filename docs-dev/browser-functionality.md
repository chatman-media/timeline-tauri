# Описание функционала браузера медиафайлов

## 1. Основной компонент Browser

**Файл:** `src/media-editor/browser/components/browser.tsx`

**Функционал:**

- Управляет вкладками браузера (Медиатека, Музыка, Переходы, Эффекты, Фильтры, Шаблоны)
- Сохраняет активную вкладку в localStorage для сохранения состояния между сессиями
- Отображает соответствующий компонент для каждой вкладки
- Обеспечивает единый интерфейс для всех типов медиа-контента

## 2. Медиатека (MediaFileList)

**Файл:** `src/media-editor/browser/components/tabs/media/media-list.tsx`

**Функционал:**

- Отображение списка медиафайлов (видео, аудио, изображения)
- Поддержка трех режимов отображения: список (list), сетка (grid), миниатюры (thumbnails)
- Сортировка файлов по имени, размеру, длительности, дате
- Фильтрация файлов по типу (все, видео, аудио, изображения)
- Группировка файлов по дате, типу, длительности
- Предпросмотр файлов при наведении курсора
- Добавление файлов на таймлайн
- Управление размером превью с сохранением настроек в localStorage
- Импорт файлов и папок
- Запись с камеры через модальное окно
- Отображение метаданных файла (длительность, разрешение, кодек)
- Поиск по имени файла

**Панель инструментов (MediaToolbar):**

- Кнопки импорта файлов и папок
- Кнопки записи (камера, экран, голос)
- Переключение режимов отображения (список, сетка, миниатюры)
- Управление размером превью (увеличение/уменьшение)
- Выбор параметров сортировки (имя, дата, размер, длительность)
- Выбор фильтров по типу файлов
- Выбор параметров группировки
- Изменение порядка сортировки (по возрастанию/убыванию)

## 3. Музыка (MusicFileList)

**Файл:** `src/media-editor/browser/components/tabs/music/music-file-list.tsx`

**Функционал:**

- Отображение аудиофайлов с метаданными (исполнитель, альбом, жанр, дата)
- Поддержка двух режимов отображения: список (list) и миниатюры (thumbnails)
- Прослушивание аудио с управлением воспроизведением (play/pause)
- Сортировка по имени, названию, исполнителю, дате, длительности, размеру
- Фильтрация по типу файла (расширению)
- Группировка по исполнителю, жанру, альбому
- Поиск по названию
- Добавление аудио на таймлайн
- Отображение длительности и размера файла

**Панель инструментов (MusicToolbar):**

- Кнопки импорта файлов и папок
- Поле поиска
- Переключение режимов отображения (список, миниатюры)
- Выбор параметров сортировки (имя, заголовок, артист, дата, размер, длительность)
- Выбор фильтров по расширению файла
- Выбор параметров группировки (артист, жанр, альбом)
- Изменение порядка сортировки (по возрастанию/убыванию)

## 4. Шаблоны (TemplateList)

**Файл:** `src/media-editor/browser/components/tabs/templates/template-list.tsx`

**Функционал:**

- Отображение шаблонов для разных соотношений сторон (ландшафт, портрет, квадрат)
- Группировка шаблонов по количеству экранов
- Адаптация размеров превью в зависимости от соотношения сторон
- Поиск шаблонов по названию
- Применение шаблонов к проекту
- Автоматическая адаптация к текущим настройкам проекта (соотношение сторон, разрешение)
- Управление размером превью с сохранением настроек

**Панель инструментов (TemplateListToolbar):**

- Поле поиска
- Управление размером превью (увеличение/уменьшение)

## 5. Переходы (TransitionsList)

**Файл:** `src/media-editor/browser/components/tabs/transitions/transition-list.tsx`

**Функционал:**

- Отображение доступных переходов между клипами (16 типов переходов)
- Предпросмотр эффекта перехода при наведении курсора
- Применение перехода к таймлайну
- Поиск переходов по названию
- Управление размером превью с сохранением настроек

**Панель инструментов:**

- Поле поиска
- Управление размером превью (увеличение/уменьшение)

## 6. Эффекты (EffectList)

**Файл:** `src/media-editor/browser/components/tabs/effects/effect-list.tsx`

**Функционал:**

- Отображение видеоэффектов (20 типов эффектов)
- Предпросмотр эффектов при наведении курсора
- Применение эффектов к видео на таймлайне
- Поиск эффектов по названию
- Управление размером превью с сохранением настроек

**Панель инструментов:**

- Поле поиска
- Управление размером превью (увеличение/уменьшение)

## 7. Фильтры (FilterList)

**Файл:** `src/media-editor/browser/components/tabs/filters/filter-list.tsx`

**Функционал:**

- Отображение цветовых фильтров
- Предпросмотр фильтров при наведении курсора
- Применение фильтров к видео на таймлайне
- Поиск фильтров по названию
- Управление размером превью с сохранением настроек
- Настройка параметров фильтра (яркость, контраст, насыщенность, гамма, температура, оттенок)

**Панель инструментов:**

- Поле поиска
- Управление размером превью (увеличение/уменьшение)

## 8. Стикеры (StickersList)

**Файл:** `src/media-editor/browser/components/tabs/stickers/sticker-list.tsx`

**Функционал:**

- Отображение стикеров для добавления на видео
- Поиск стикеров
- Перетаскивание стикеров на таймлайн (в разработке)

**Панель инструментов:**

- Поле поиска

## 9. Субтитры (SubtitlesList)

**Файл:** `src/media-editor/browser/components/tabs/subtitles/subtitle-list.tsx` (не реализовано)

**Функционал (планируемый):**

- Отображение доступных субтитров
- Создание и редактирование субтитров
- Импорт субтитров из файлов (SRT, VTT)
- Экспорт субтитров в различные форматы
- Синхронизация субтитров с видео
- Настройка стилей субтитров (шрифт, размер, цвет, положение)
- Автоматическое распознавание речи для создания субтитров

**Панель инструментов (планируемая):**

- Поле поиска
- Кнопки импорта/экспорта субтитров
- Кнопка автоматического распознавания речи
- Настройки стилей субтитров

## 10. Запись с камеры (CameraRecording)

**Файл:** `src/media-editor/dialogs/components/camera-recording.tsx`

**Функционал:**

- Открытие модального окна для записи с веб-камеры
- Предварительный просмотр видео с камеры в реальном времени
- Запись видео с возможностью просмотра во время записи
- Обработка записанного видео
- Создание медиафайла из записанного блоба
- Получение метаданных видео (длительность, разрешение)
- Предпросмотр записанного видео перед сохранением

## TODO (Необходимые доработки)

1. **Запись экрана**

   - Создать компонент `screen-recording.tsx` для записи экрана
   - Реализовать интерфейс выбора области экрана для записи
   - Добавить настройки качества записи
   - Реализовать предпросмотр записи в реальном времени

2. **Запись голоса**

   - Создать компонент `audio-recording.tsx` для записи голоса
   - Реализовать визуализацию звуковой волны
   - Добавить настройки качества записи

3. **Механизм добавления эффектов, фильтров и переходов на таймлайн**

   - Разработать систему перетаскивания (drag-and-drop) эффектов на клипы
   - Реализовать предпросмотр применения эффекта к конкретному клипу
   - Создать интерфейс настройки параметров эффектов

4. **Интеграция шаблонов с объединенным схема-таймлайном**

   - Разработать механизм применения шаблонов к нескольким клипам
   - Создать систему автоматического размещения клипов по шаблону
   - Реализовать предпросмотр применения шаблона к выбранным клипам

5. **Реализация функционала субтитров**

   - Создать компонент `subtitle-list.tsx` для работы с субтитрами
   - Разработать интерфейс создания и редактирования субтитров
   - Реализовать импорт/экспорт субтитров в различных форматах
   - Добавить функцию автоматического распознавания речи
   - Создать редактор стилей субтитров

6. **Улучшение предпросмотра видео**
   - Добавить возможность просмотра видео в полноэкранном режиме
   - Реализовать предпросмотр с применением эффектов и фильтров
   - Добавить возможность создания скриншотов из видео
   - Реализовать покадровый просмотр видео
